apiVersion: pingcap.com/v1alpha1
kind: TidbCluster
metadata:
  name: CLUSTER_NAME
spec:
  version: v3.0.12
  timezone: UTC
  pvReclaimPolicy: Retain
  schedulerName: tidb-scheduler
  pd:
    config: {}
    nodeSelector:
      dedicated: CLUSTER_NAME-pd
    replicas: 3
    requests:
      cpu: "1"
      memory: 400Mi
      storage: 1Gi
    tolerations:
    - effect: NoSchedule
      key: dedicated
      operator: Equal
      value: CLUSTER_NAME-pd
  tidb:
    config: {}
    nodeSelector:
      dedicated: CLUSTER_NAME-tidb
    replicas: 2
    requests:
      cpu: "1"
      memory: 400Mi
    separateSlowLog: true
    service:
      type: LoadBalancer
      exposeStatus: true
    slowLogTailer:
      limits:
        cpu: 100m
        memory: 50Mi
      requests:
        cpu: 20m
        memory: 5Mi
    tolerations:
    - effect: NoSchedule
      key: dedicated
      operator: Equal
      value: CLUSTER_NAME-tidb
  tikv:
    config:
      log-level: info
    nodeSelector:
      dedicated: CLUSTER_NAME-tikv
    replicas: 3
    requests:
      cpu: "1"
      memory: 2Gi
      storage: 45Gi
    storageClassName: local-storage
    tolerations:
    - effect: NoSchedule
      key: dedicated
      operator: Equal
      value: CLUSTER_NAME-tikv
