version: "2"

linters:
  default: none
  enable:
    - staticcheck  # includes gosimple
    - gosec
  disable:
    - errcheck

  settings:
    gosec:
      excludes:
        - G107  # Rule: Url provided to HTTP request as taint input
        - G108  # Rule: Profiling endpoint automatically exposed on /debug/pprof
        - G306  # Rule: Poor file permissions used when writing to a new file
        - G402  # Rule: Look for bad TLS connection settings
        - G404  # Rule: Insecure random number source (rand)
        - G201  # Rule: SQL query construction using format string
        - G114  # Rule: Use of net/http serve function that has no support for setting timeouts
        - G112  # Rule: Potential slowloris attack
        - G115  # Rule: integer overflow conversion
        - G103  # Rule: Use of unsafe calls should be audited
        - G104  # Rule: Errors unhandled
        - G204  # Rule: Subprocess launched with variable
        - G301  # Rule: Expect directory permissions to be 0750 or less
        - G302  # Rule: Expect file permissions to be 0600 or less
        - G304  # Rule: Potential file inclusion via variable
    
    govet:
      disable:
        - printf  # non-constant format string in call

  exclusions:
    generated: lax
    rules:
      - path: tests/
        linters:
          - gosec
      - path: (pkg|tests)/third_party/
        linters:
          - staticcheck
          - typecheck
          - gosec
          - goimports
      - linters:
          - staticcheck
        text: "SA1019:"  # Rule: Using a deprecated function, variable, constant or field

formatters:
  enable:
    - goimports
